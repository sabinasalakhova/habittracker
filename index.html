<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-User Habit Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #7209b7;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --danger: #e63946;
            --warning: #fca311;
            --completed: #4ade80;
            --current-day: #ffb4a2;
            --user-1: #4361ee;
            --user-2: #e63946;
            --user-3: #4cc9f0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }
        
        header {
            background: var(--primary);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .date-display {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .user-section {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 15px;
            background: var(--light);
            border-bottom: 1px solid #eee;
        }
        
        .user-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .user-btn.active {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }
        
        .user-1 {
            background: var(--user-1);
            color: white;
        }
        
        .user-2 {
            background: var(--user-2);
            color: white;
        }
        
        .user-3 {
            background: var(--user-3);
            color: white;
        }
        
        .motivation {
            text-align: center;
            padding: 15px;
            background: var(--light);
            font-style: italic;
            border-bottom: 1px solid #eee;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
        }
        
        .habit-section {
            flex: 2;
            min-width: 300px;
            padding: 25px;
        }
        
        .stats-section {
            flex: 1;
            min-width: 250px;
            background: var(--light);
            padding: 25px;
        }
        
        .section-title {
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
        }
        
        .habit-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .habit-item {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }
        
        .habit-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .habit-title {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--dark);
        }
        
        .streak-counter {
            background: var(--accent);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 10px;
        }
        
        .day {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .day.current {
            background: var(--current-day);
            color: var(--dark);
        }
        
        .day.completed {
            background: var(--completed);
            color: white;
        }
        
        .day.missed {
            background: var(--danger);
            color: white;
        }
        
        .day.future {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
        }
        
        .day:hover:not(.future) {
            transform: scale(1.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .stat-label {
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--success);
            border-radius: 5px;
            transition: width 0.5s;
        }
        
        .quote-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .quote {
            font-style: italic;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .author {
            color: var(--secondary);
            font-weight: 500;
        }
        
        .btn {
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        .reset-btn {
            background: var(--danger);
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .calendar {
                grid-template-columns: repeat(7, 1fr);
            }
            
            .day {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .user-section {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-users"></i> Multi-User Habit Tracker</h1>
            <div class="date-display" id="currentDate">Loading date...</div>
        </header>
        
        <div class="user-section">
            <button class="user-btn user-1 active" data-user="user1">User 1</button>
            <button class="user-btn user-2" data-user="user2">User 2</button>
            <button class="user-btn user-3" data-user="user3">User 3</button>
        </div>
        
        <div class="motivation" id="motivationText">
            "Every day, in every way, I'm getting better and better." - Émile Coué
        </div>
        
        <div class="content">
            <div class="habit-section">
                <h2 class="section-title">Your Daily Habits</h2>
                
                <div class="habit-list" id="habitList">
                    <!-- Habits will be generated here -->
                </div>
                
                <button class="btn" id="addHabitBtn"><i class="fas fa-plus"></i> Add New Habit</button>
                <button class="btn reset-btn" id="resetBtn"><i class="fas fa-redo"></i> Reset Progress</button>
            </div>
            
            <div class="stats-section">
                <h2 class="section-title">Your Progress</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Completion Rate</div>
                        <div class="stat-value" id="completionRate">0%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="completionBar" style="width: 0%;"></div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Current Streak</div>
                        <div class="stat-value" id="currentStreak">0 days</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="streakBar" style="width: 0%;"></div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Habits Tracked</div>
                        <div class="stat-value" id="habitsTracked">0</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Total Check-ins</div>
                        <div class="stat-value" id="totalCheckins">0</div>
                    </div>
                </div>
                
                <div class="quote-container">
                    <div class="quote" id="dailyQuote">
                        "We are what we repeatedly do. Excellence, then, is not an act, but a habit."
                    </div>
                    <div class="author" id="quoteAuthor">- Aristotle</div>
                </div>
                
                <div class="quote-container">
                    <h3>Psychological Tips</h3>
                    <p class="quote" id="psychTip">
                        "Start with small habits. The '2-minute rule' suggests scaling habits down to something you can do in just two minutes."
                    </p>
                    <button class="btn" id="newTipBtn"><i class="fas fa-lightbulb"></i> New Tip</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Default habits structure
        const defaultHabits = [
            { id: 'meditation', name: 'Morning Meditation', streak: 0, history: [] },
            { id: 'exercise', name: 'Exercise', streak: 0, history: [] },
            { id: 'reading', name: 'Reading', streak: 0, history: [] },
            { id: 'nophone', name: 'No Phone After 10 PM', streak: 0, history: [] }
        ];
        
        // Initialize user data
        let currentUser = 'user1';
        let userData = {
            user1: { habits: JSON.parse(JSON.stringify(defaultHabits)) },
            user2: { habits: JSON.parse(JSON.stringify(defaultHabits)) },
            user3: { habits: JSON.parse(JSON.stringify(defaultHabits)) }
        };
        
        // Set current date
        const now = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', options);
        
        // Motivational quotes
        const motivationQuotes = [
            "Every day, in every way, I'm getting better and better.",
            "Your habits determine your future.",
            "Small changes eventually add up to huge results.",
            "The best time to plant a tree was 20 years ago. The second best time is now.",
            "You'll never change your life until you change something you do daily.",
            "Success is the product of daily habits—not once-in-a-lifetime transformations.",
            "We first make our habits, then our habits make us.",
            "Good habits are worth being fanatical about.",
            "The chains of habit are too light to be felt until they are too heavy to be broken.",
            "Quality is not an act, it is a habit."
        ];
        
        // Psychological tips
        const psychTips = [
            "Start with small habits. The '2-minute rule' suggests scaling habits down to something you can do in just two minutes.",
            "Use implementation intentions: 'I will [BEHAVIOR] at [TIME] in [LOCATION].'",
            "Track your habits visually. The mere act of tracking a behavior can spark change.",
            "Design your environment to make good habits easier and bad habits harder.",
            "Use temptation bundling: pair something you want to do with something you need to do.",
            "Focus on the process, not the outcome. Fall in love with the daily practice.",
            "Never miss twice. If you miss one day, try to get back on track immediately.",
            "Make habits obvious, attractive, easy, and satisfying.",
            "Use a habit tracker to maintain consistency and visualize progress.",
            "Practice habit stacking: add a new habit onto an existing one."
        ];
        
        // Famous quotes
        const famousQuotes = [
            {quote: "We are what we repeatedly do. Excellence, then, is not an act, but a habit.", author: "Aristotle"},
            {quote: "The secret of your future is hidden in your daily routine.", author: "Mike Murdock"},
            {quote: "Good habits are the key to all success. Bad habits are the unlocked door to failure.", author: "Og Mandino"},
            {quote: "Successful people are simply those with successful habits.", author: "Brian Tracy"},
            {quote: "The difference between who you are and who you want to be is what you do.", author: "Charles Duhigg"},
            {quote: "Motivation is what gets you started. Habit is what keeps you going.", author: "Jim Ryun"},
            {quote: "Your net worth to the world is usually determined by what remains after your bad habits are subtracted from your good ones.", author: "Benjamin Franklin"},
            {quote: "First forget inspiration. Habit is more dependable. Habit will sustain you whether you're inspired or not.", author: "Octavia Butler"},
            {quote: "The successful person has the habit of doing the things failures don't like to do.", author: "Albert Gray"},
            {quote: "Habits are the compound interest of self-improvement.", author: "James Clear"}
        ];
        
        // Load data from localStorage
        function loadUserData() {
            const savedData = localStorage.getItem('habitTrackerData');
            if (savedData) {
                userData = JSON.parse(savedData);
            }
        }
        
        // Save data to localStorage
        function saveUserData() {
            localStorage.setItem('habitTrackerData', JSON.stringify(userData));
        }
        
        // Initialize the app
        function initApp() {
            loadUserData();
            renderHabits();
            updateStats();
            setRandomContent();
            setupEventListeners();
        }
        
        // Render habits for current user
        function renderHabits() {
            const habitList = document.getElementById('habitList');
            habitList.innerHTML = '';
            
            userData[currentUser].habits.forEach(habit => {
                const habitItem = document.createElement('div');
                habitItem.className = 'habit-item';
                
                // Calculate completed days for progress bar
                const totalDays = 14;
                const completedDays = habit.history.filter(day => day.status === 'completed').length;
                const progressPercent = (completedDays / totalDays) * 100;
                
                habitItem.innerHTML = `
                    <div class="habit-header">
                        <div class="habit-title">${habit.name}</div>
                        <div class="streak-counter">${habit.streak} day streak</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progressPercent}%;"></div>
                    </div>
                    <div class="calendar">
                        ${generateCalendarDays(habit)}
                    </div>
                `;
                
                habitList.appendChild(habitItem);
            });
            
            // Add click events to calendar days
            setTimeout(() => {
                const days = document.querySelectorAll('.day:not(.future)');
                days.forEach(day => {
                    day.addEventListener('click', function() {
                        const habitId = this.getAttribute('data-habit');
                        const dayNum = this.getAttribute('data-day');
                        toggleDayStatus(habitId, dayNum);
                    });
                });
            }, 100);
        }
        
        // Generate calendar days for a habit
        function generateCalendarDays(habit) {
            let daysHtml = '';
            const today = new Date();
            
            for (let i = 1; i <= 14; i++) {
                const dayDate = new Date();
                dayDate.setDate(today.getDate() - (14 - i));
                
                const isToday = i === 14;
                const isFuture = i > 14;
                
                // Check if this day is in habit history
                const dateStr = formatDate(dayDate);
                const dayData = habit.history.find(d => d.date === dateStr);
                
                let dayClass = 'day';
                if (isToday) dayClass += ' current';
                else if (isFuture) dayClass += ' future';
                else if (dayData) dayClass += ` ${dayData.status}`;
                
                daysHtml += `<div class="${dayClass}" data-habit="${habit.id}" data-day="${i}">${i}</div>`;
            }
            
            return daysHtml;
        }
        
        // Format date as YYYY-MM-DD
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }
        
        // Toggle day status between completed and missed
        function toggleDayStatus(habitId, dayNum) {
            const habit = userData[currentUser].habits.find(h => h.id === habitId);
            if (!habit) return;
            
            const today = new Date();
            const dayDate = new Date();
            dayDate.setDate(today.getDate() - (14 - dayNum));
            const dateStr = formatDate(dayDate);
            
            // Find existing entry for this date
            const existingIndex = habit.history.findIndex(d => d.date === dateStr);
            
            if (existingIndex >= 0) {
                // Toggle status
                habit.history[existingIndex].status = 
                    habit.history[existingIndex].status === 'completed' ? 'missed' : 'completed';
            } else {
                // Add new entry
                habit.history.push({
                    date: dateStr,
                    status: 'completed'
                });
            }
            
            // Update streak
            updateStreak(habit);
            
            // Save and re-render
            saveUserData();
            renderHabits();
            updateStats();
        }
        
        // Update streak for a habit
        function updateStreak(habit) {
            // Sort history by date descending
            habit.history.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            let streak = 0;
            const today = new Date();
            
            for (let i = 0; i < habit.history.length; i++) {
                const historyDate = new Date(habit.history[i].date);
                const diffTime = today - historyDate;
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                
                if (i === 0 && diffDays === 0 && habit.history[i].status === 'completed') {
                    streak = 1;
                } else if (i > 0 && habit.history[i].status === 'completed') {
                    const prevDate = new Date(habit.history[i-1].date);
                    const dayDiff = Math.floor((prevDate - historyDate) / (1000 * 60 * 60 * 24));
                    
                    if (dayDiff === 1) {
                        streak++;
                    } else {
                        break;
                    }
                } else {
                    break;
                }
            }
            
            habit.streak = streak;
        }
        
        // Update statistics
        function updateStats() {
            const habits = userData[currentUser].habits;
            
            // Calculate completion rate
            let totalDays = 0;
            let completedDays = 0;
            
            habits.forEach(habit => {
                habit.history.forEach(day => {
                    totalDays++;
                    if (day.status === 'completed') completedDays++;
                });
            });
            
            const completionRate = totalDays > 0 ? Math.round((completedDays / totalDays) * 100) : 0;
            document.getElementById('completionRate').textContent = `${completionRate}%`;
            document.getElementById('completionBar').style.width = `${completionRate}%`;
            
            // Calculate current streak
            const currentStreak = Math.max(...habits.map(h => h.streak));
            document.getElementById('currentStreak').textContent = `${currentStreak} days`;
            document.getElementById('streakBar').style.width = `${Math.min(currentStreak * 10, 100)}%`;
            
            // Other stats
            document.getElementById('habitsTracked').textContent = habits.length;
            document.getElementById('totalCheckins').textContent = completedDays;
        }
        
        // Set random content
        function setRandomContent() {
            document.getElementById('motivationText').textContent = '"' + motivationQuotes[Math.floor(Math.random() * motivationQuotes.length)] + '"';
            
            const randomQuote = famousQuotes[Math.floor(Math.random() * famousQuotes.length)];
            document.getElementById('dailyQuote').textContent = '"' + randomQuote.quote + '"';
            document.getElementById('quoteAuthor').textContent = '- ' + randomQuote.author;
            
            document.getElementById('psychTip').textContent = '"' + psychTips[Math.floor(Math.random() * psychTips.length)] + '"';
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // User buttons
            document.querySelectorAll('.user-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.user-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentUser = this.getAttribute('data-user');
                    renderHabits();
                    updateStats();
                });
            });
            
            // New tip button
            document.getElementById('newTipBtn').addEventListener('click', function() {
                document.getElementById('psychTip').textContent = '"' + psychTips[Math.floor(Math.random() * psychTips.length)] + '"';
            });
            
            // Add habit button
            document.getElementById('addHabitBtn').addEventListener('click', function() {
                const habitName = prompt('Enter a name for your new habit:');
                if (habitName && habitName.trim() !== '') {
                    const newHabit = {
                        id: 'habit-' + Date.now(),
                        name: habitName,
                        streak: 0,
                        history: []
                    };
                    
                    userData[currentUser].habits.push(newHabit);
                    saveUserData();
                    renderHabits();
                    updateStats();
                }
            });
            
            // Reset button
            document.getElementById('resetBtn').addEventListener('click', function() {
                if (confirm('Are you sure you want to reset all progress for this user?')) {
                    userData[currentUser].habits = JSON.parse(JSON.stringify(defaultHabits));
                    saveUserData();
                    renderHabits();
                    updateStats();
                }
            });
        }
        
        // Initialize the app
        initApp();
    </script>
</body>
</html>
